#define CW_ERA_MODIFY_TYPE TYPE TRAITS
	[store_unit]
		[filter]
			canrecruit=yes
			type={TYPE}
			[/filter]
		variable=temp_unit
		kill=yes
	[/store_unit]
	{FOREACH temp_unit i}
		[unit]
			type=$temp_unit[$i].type
			id=$temp_unit[$i].id
			name=$temp_unit[$i].name
			side=$temp_unit[$i].side
			canrecruit=$temp_unit[$i].canrecruit
			x=$temp_unit[$i].x
			y=$temp_unit[$i].y
			random_traits=no
			[modifications]
				{TRAITS}
				[/modifications]
			to_variable=place_unit
			[/unit]
		{VARIABLE place_unit.variables $temp_unit[$i].variables}
		[unstore_unit]
			variable=place_unit
			[/unstore_unit]
	{NEXT i}
	{CLEAR_VARIABLE temp_unit,place_unit}
#enddef

